{% load static %}
<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <title>Histórico de Pedidos</title>

    <!-- Tailwind (NECESSÁRIO PARA A NAVBAR) -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- CSS da página -->
    <link rel="stylesheet" href="{% static 'css/order_history.css' %}">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>

    <!-- NAVBAR -->
    {% include "nav.html" %}

    <!-- CONTEÚDO -->
    <main class="history-container">

        <!-- HEADER -->
        <div class="history-header">
            <h1>
                <i class="fa-solid fa-box-archive"></i>
                Histórico de Pedidos
            </h1>

            <a href="{% url 'storage:request-order' %}" class="btn-new-order">
                <i class="fa-solid fa-plus"></i>
                Novo Pedido
            </a>
        </div>

        <!-- LISTA DE PEDIDOS -->
        <section class="orders-list">

            {% for order in orders %}
            <div class="order-card">

                <div class="order-header">
                    <span class="order-id">Pedido #{{ order.id }}</span>

                    {% if order.is_approved %}
                    <span class="status approved">
                        <i class="fa-solid fa-check"></i> Aprovado
                    </span>
                    {% else %}
                    <span class="status pending">
                        <i class="fa-solid fa-hourglass-half"></i> Pendente
                    </span>
                    {% endif %}
                </div>

                <div class="order-date">
                    <i class="fa-regular fa-clock"></i>
                    {{ order.created_at|date:"d/m/Y H:i" }}
                </div>

                <ul class="order-items">
                    {% for item in order.orderitem_set.all %}
                    <li>
                        <span class="item-name">{{ item.item.name }}</span>
                        <span class="item-qty">x{{ item.quantity }}</span>
                    </li>
                    {% endfor %}
                </ul>

            </div>
            {% empty %}
            <p class="empty-message">
                <i class="fa-regular fa-folder-open"></i><br>
                Você ainda não realizou nenhum pedido.
            </p>
            {% endfor %}

        </section>

    </main>

</body>

</html>